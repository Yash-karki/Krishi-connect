<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Products - कृषिConnect</title>
  <link rel="stylesheet" href="css/products.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="container header-wrap">
      <div class="brand">
        <a href="index.html" class="brand-link"><span class="logo-text">कृषि</span><span class="logo-strong">Connect</span></a>
      </div>
      <nav class="nav">
        <a href="products.html" class="active">Buy Produce</a>
        <a href="waste.html">Sell Produce/Waste</a>
        <a href="dashboard.html">Dashboard</a>
      </nav>
      <div class="auth">
        <span id="userInfo" style="display: none;">
          <span id="userName"></span>
          <button id="logoutBtn" class="logout-btn">Logout</button>
        </span>
        <div id="authLinks">
          <a class="link" href="signup.html">sign in</a>
          <a class="btn btn-primary" href="signup.html">sign up</a>
        </div>
      </div>
    </div>
  </header>

  <main class="products-page container">
    <div class="products-topbar">
      <form id="products-search" class="search">
        <input id="q" type="text" placeholder="Search products" aria-label="Search products" />
        <button type="submit" class="btn btn-amber">Search</button>
      </form>
      <a href="cart.html" class="btn btn-success" id="cartLink">Cart (0)</a>
    </div>

    <section id="productsGrid" class="products-grid">
      <!-- Cards injected by JS -->
    </section>
  </main>



  <script src="js/auth.js"></script>
  <script src="js/api.js"></script>
  <script src="js/products.js"></script>
  <script src="js/auth-guard.js"></script>
  <script>
    // Setup authentication UI
    document.addEventListener('DOMContentLoaded', function() {
      if (window.KrishiAuth && window.KrishiAuth.isAuthenticated()) {
        const user = window.KrishiAuth.getCurrentUser();
        if (user) {
          document.getElementById('userName').textContent = `Welcome, ${user.name}`;
          document.getElementById('userInfo').style.display = 'inline';
          document.getElementById('authLinks').style.display = 'none';
          
          // Setup logout button
          const logoutBtn = document.getElementById('logoutBtn');
          if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
              window.KrishiAuth.logout();
            });
          }
        }
      }
    });
  </script>
</body>
</html>


