<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart - à¤•à¥ƒà¤·à¤¿Connect</title>
  <link rel="stylesheet" href="css/cart.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="container header-wrap">
      <div class="brand">
        <a href="index.html" class="brand-link"><span class="logo-text">à¤•à¥ƒà¤·à¤¿</span><span class="logo-strong">Connect</span></a>
      </div>
      <nav class="nav">
        <a href="products.html">Buy Produce</a>
        <a href="waste.html">Sell Produce/Waste</a>
        <a href="dashboard.html">Dashboard</a>
      </nav>
      <div class="auth">
        <span id="userInfo" style="display: none;">
          <span id="userName"></span>
          <button id="logoutBtn" class="logout-btn">Logout</button>
        </span>
        <div id="authLinks">
          <a class="link" href="signup.html">sign in</a>
          <a class="btn btn-primary" href="signup.html">sign up</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Cart Section -->
  <section class="cart-container">
    <!-- Left Column - Product List -->
    <div class="cart-items">
      <div class="cart-header">
        <div>Product</div>
        <div>Qnt</div>
        <div>Price</div>
      </div>
      <div id="cartItems">
        <!-- Dynamic JS render -->
      </div>
    </div>

    <!-- Right Column - Cart Summary -->
    <div class="cart-summary">
      <h2>my cart</h2>
      <div class="cart-total">
        cart total <span class="amount">â‚¹<span id="totalPrice">0</span></span>
      </div>
      <div class="shipping-note">
        shipping and taxes calculated at check out
      </div>
      
      <div class="terms-section">
        <div class="terms-checkbox">
          <input type="checkbox" id="termsCheck">
          <div class="terms-text">
            i agree to <a href="#" class="terms-link">terms & conditions</a>
          </div>
        </div>
      </div>
      
      <button class="checkout" id="checkoutBtn">checkout</button>
      
      <div class="cart-icon">
        ðŸ›’
      </div>
    </div>
  </section>

  <script src="js/auth.js"></script>
  <script src="js/api.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/auth-guard.js"></script>
  <script>
    // Setup authentication UI
    document.addEventListener('DOMContentLoaded', function() {
      if (window.KrishiAuth && window.KrishiAuth.isAuthenticated()) {
        const user = window.KrishiAuth.getCurrentUser();
        if (user) {
          document.getElementById('userName').textContent = `Welcome, ${user.name}`;
          document.getElementById('userInfo').style.display = 'inline';
          document.getElementById('authLinks').style.display = 'none';
          
          // Setup logout button
          const logoutBtn = document.getElementById('logoutBtn');
          if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
              window.KrishiAuth.logout();
            });
          }
        }
      }
    });
  </script>
</body>
</html>
